<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lab 6 Linear Regression | Remote Sensing in the Social Sciences</title>
  <meta name="description" content="Lab 6 Linear Regression | Remote Sensing in the Social Sciences" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Lab 6 Linear Regression | Remote Sensing in the Social Sciences" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lab 6 Linear Regression | Remote Sensing in the Social Sciences" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="linear-regression.html"/>
<link rel="next" href="nonlinear-regression.html"/>
<script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html"><i class="fa fa-check"></i>PreLab: Getting Started</a><ul>
<li class="chapter" data-level="" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="0.1" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#data-and-methods"><i class="fa fa-check"></i><b>0.1</b> Data and Methods</a></li>
<li class="chapter" data-level="0.2" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#images-and-image-collections"><i class="fa fa-check"></i><b>0.2</b> Images and Image Collections</a><ul>
<li class="chapter" data-level="0.2.1" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#images"><i class="fa fa-check"></i><b>0.2.1</b> Images</a></li>
<li class="chapter" data-level="0.2.2" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#image-collections"><i class="fa fa-check"></i><b>0.2.2</b> Image Collections</a></li>
<li class="chapter" data-level="0.2.3" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#sensed-versus-derived-imagery"><i class="fa fa-check"></i><b>0.2.3</b> Sensed versus Derived Imagery</a></li>
</ul></li>
<li class="chapter" data-level="0.3" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#geometries"><i class="fa fa-check"></i><b>0.3</b> Geometries</a></li>
<li class="chapter" data-level="0.4" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#features-and-feature-collections"><i class="fa fa-check"></i><b>0.4</b> Features and Feature Collections</a><ul>
<li class="chapter" data-level="0.4.1" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#features"><i class="fa fa-check"></i><b>0.4.1</b> Features</a></li>
<li class="chapter" data-level="0.4.2" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#feature-collections"><i class="fa fa-check"></i><b>0.4.2</b> Feature Collections</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#methods-reducers"><i class="fa fa-check"></i><b>0.5</b> Methods: Reducers</a></li>
<li class="chapter" data-level="0.6" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#joins-and-arrays"><i class="fa fa-check"></i><b>0.6</b> Joins and Arrays</a><ul>
<li class="chapter" data-level="0.6.1" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#join"><i class="fa fa-check"></i><b>0.6.1</b> Join</a></li>
<li class="chapter" data-level="0.6.2" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#arrays"><i class="fa fa-check"></i><b>0.6.2</b> Arrays</a></li>
</ul></li>
<li class="chapter" data-level="0.7" data-path="prelab-getting-started.html"><a href="prelab-getting-started.html#additional-resources"><i class="fa fa-check"></i><b>0.7</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lab1.html"><a href="lab1.html"><i class="fa fa-check"></i><b>1</b> Remote Sensing Background</a><ul>
<li class="chapter" data-level="" data-path="lab1.html"><a href="lab1.html#overview-1"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1.1" data-path="lab1.html"><a href="lab1.html#what-is-a-digital-image"><i class="fa fa-check"></i><b>1.1</b> What is a digital image?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="lab1.html"><a href="lab1.html#from-digital-image-to-geospatial-image"><i class="fa fa-check"></i><b>1.1.1</b> From digital image to geospatial image</a></li>
<li class="chapter" data-level="1.1.2" data-path="lab1.html"><a href="lab1.html#visualize-a-digital-image"><i class="fa fa-check"></i><b>1.1.2</b> Visualize a Digital Image</a></li>
<li class="chapter" data-level="1.1.3" data-path="lab1.html"><a href="lab1.html#digital-image-visualization-and-stretching"><i class="fa fa-check"></i><b>1.1.3</b> Digital Image Visualization and Stretching</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="lab1.html"><a href="lab1.html#spatial-resolution"><i class="fa fa-check"></i><b>1.2</b> Spatial Resolution</a><ul>
<li class="chapter" data-level="1.2.1" data-path="lab1.html"><a href="lab1.html#modis"><i class="fa fa-check"></i><b>1.2.1</b> MODIS</a></li>
<li class="chapter" data-level="1.2.2" data-path="lab1.html"><a href="lab1.html#multispectral-scanners"><i class="fa fa-check"></i><b>1.2.2</b> Multispectral Scanners</a></li>
<li class="chapter" data-level="1.2.3" data-path="lab1.html"><a href="lab1.html#thematic-mapper-tm"><i class="fa fa-check"></i><b>1.2.3</b> Thematic Mapper (TM)</a></li>
<li class="chapter" data-level="1.2.4" data-path="lab1.html"><a href="lab1.html#national-agriculture-imagery-program-naip"><i class="fa fa-check"></i><b>1.2.4</b> National Agriculture Imagery Program (NAIP)</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="lab1.html"><a href="lab1.html#spectral-resolution"><i class="fa fa-check"></i><b>1.3</b> Spectral Resolution</a></li>
<li class="chapter" data-level="1.4" data-path="lab1.html"><a href="lab1.html#temporal-resolution"><i class="fa fa-check"></i><b>1.4</b> Temporal Resolution</a><ul>
<li class="chapter" data-level="1.4.1" data-path="lab1.html"><a href="lab1.html#modis-1"><i class="fa fa-check"></i><b>1.4.1</b> MODIS</a></li>
<li class="chapter" data-level="1.4.2" data-path="lab1.html"><a href="lab1.html#landsat"><i class="fa fa-check"></i><b>1.4.2</b> Landsat</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="lab1.html"><a href="lab1.html#radiometric-resolution"><i class="fa fa-check"></i><b>1.5</b> Radiometric Resolution</a></li>
<li class="chapter" data-level="1.6" data-path="lab1.html"><a href="lab1.html#resampling-and-reprojection"><i class="fa fa-check"></i><b>1.6</b> Resampling and ReProjection</a></li>
<li class="chapter" data-level="1.7" data-path="lab1.html"><a href="lab1.html#additional-exercises"><i class="fa fa-check"></i><b>1.7</b> Additional Exercises</a></li>
<li class="chapter" data-level="" data-path="lab1.html"><a href="lab1.html#where-to-submit"><i class="fa fa-check"></i>Where to submit</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab2.html"><a href="lab2.html"><i class="fa fa-check"></i><b>2</b> Digital Imagery &amp; Image Processing</a><ul>
<li class="chapter" data-level="" data-path="lab2.html"><a href="lab2.html#overview-2"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="2.1" data-path="lab2.html"><a href="lab2.html#searching-for-imagery-exercise-1"><i class="fa fa-check"></i><b>2.1</b> Searching for Imagery (Exercise 1)</a></li>
<li class="chapter" data-level="2.2" data-path="lab2.html"><a href="lab2.html#visualizing-landsat-imagery"><i class="fa fa-check"></i><b>2.2</b> Visualizing Landsat Imagery</a></li>
<li class="chapter" data-level="2.3" data-path="lab2.html"><a href="lab2.html#plot-at-sensor-radiance"><i class="fa fa-check"></i><b>2.3</b> Plot at-Sensor Radiance</a></li>
<li class="chapter" data-level="2.4" data-path="lab2.html"><a href="lab2.html#plot-top-of-atmosphere-toa-reflectance"><i class="fa fa-check"></i><b>2.4</b> Plot Top-of-Atmosphere (TOA) Reflectance</a></li>
<li class="chapter" data-level="2.5" data-path="lab2.html"><a href="lab2.html#plot-surface-reflectance"><i class="fa fa-check"></i><b>2.5</b> Plot Surface Reflectance</a></li>
<li class="chapter" data-level="2.6" data-path="lab2.html"><a href="lab2.html#additional-exercises-1"><i class="fa fa-check"></i><b>2.6</b> Additional Exercises</a></li>
<li class="chapter" data-level="" data-path="lab2.html"><a href="lab2.html#where-to-submit-1"><i class="fa fa-check"></i>Where to submit</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lab3.html"><a href="lab3.html"><i class="fa fa-check"></i><b>3</b> Spectral Indices &amp; Transformations</a><ul>
<li class="chapter" data-level="" data-path="lab3.html"><a href="lab3.html#overview-3"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="3.1" data-path="lab3.html"><a href="lab3.html#spectral-indices"><i class="fa fa-check"></i><b>3.1</b> Spectral Indices</a><ul>
<li class="chapter" data-level="3.1.1" data-path="lab3.html"><a href="lab3.html#important-indices"><i class="fa fa-check"></i><b>3.1.1</b> Important Indices</a></li>
<li class="chapter" data-level="3.1.2" data-path="lab3.html"><a href="lab3.html#linear-transformations"><i class="fa fa-check"></i><b>3.1.2</b> Linear Transformations</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="lab3.html"><a href="lab3.html#spectral-transformation"><i class="fa fa-check"></i><b>3.2</b> Spectral Transformation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="lab3.html"><a href="lab3.html#linear-filtering"><i class="fa fa-check"></i><b>3.2.1</b> Linear Filtering</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="lab3.html"><a href="lab3.html#additional-exercises-2"><i class="fa fa-check"></i><b>3.3</b> Additional Exercises</a></li>
<li class="chapter" data-level="" data-path="lab3.html"><a href="lab3.html#where-to-submit-2"><i class="fa fa-check"></i>Where to submit</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab4.html"><a href="lab4.html"><i class="fa fa-check"></i><b>4</b> Classification</a><ul>
<li class="chapter" data-level="" data-path="lab4.html"><a href="lab4.html#overview-4"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="4.1" data-path="lab4.html"><a href="lab4.html#unsupervised-classification"><i class="fa fa-check"></i><b>4.1</b> Unsupervised Classification</a></li>
<li class="chapter" data-level="4.2" data-path="lab4.html"><a href="lab4.html#supervised-classification"><i class="fa fa-check"></i><b>4.2</b> Supervised Classification</a></li>
<li class="chapter" data-level="4.3" data-path="lab4.html"><a href="lab4.html#accuracy-assessment"><i class="fa fa-check"></i><b>4.3</b> Accuracy Assessment</a></li>
<li class="chapter" data-level="4.4" data-path="lab4.html"><a href="lab4.html#hyperparameter-tuning"><i class="fa fa-check"></i><b>4.4</b> Hyperparameter Tuning</a></li>
<li class="chapter" data-level="4.5" data-path="lab4.html"><a href="lab4.html#additional-exercises-3"><i class="fa fa-check"></i><b>4.5</b> Additional Exercises</a></li>
<li class="chapter" data-level="" data-path="lab4.html"><a href="lab4.html#where-to-submit-3"><i class="fa fa-check"></i>Where to submit</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>5</b> Linear Regression</a><ul>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#overview-5"><i class="fa fa-check"></i>Overview</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="linear-regression-1.html"><a href="linear-regression-1.html"><i class="fa fa-check"></i><b>6</b> Linear Regression</a><ul>
<li class="chapter" data-level="6.1" data-path="linear-regression-1.html"><a href="linear-regression-1.html#regression"><i class="fa fa-check"></i><b>6.1</b> Regression</a><ul>
<li class="chapter" data-level="6.1.1" data-path="linear-regression-1.html"><a href="linear-regression-1.html#ordinary-least-squares-ols"><i class="fa fa-check"></i><b>6.1.1</b> Ordinary Least Squares (OLS)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="nonlinear-regression.html"><a href="nonlinear-regression.html"><i class="fa fa-check"></i><b>7</b> Nonlinear Regression</a></li>
<li class="chapter" data-level="8" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>8</b> Time Series</a><ul>
<li class="chapter" data-level="8.1" data-path="time-series.html"><a href="time-series.html#multi-temporal-data-in-earth-engine"><i class="fa fa-check"></i><b>8.1</b> Multi-Temporal Data in Earth Engine</a></li>
<li class="chapter" data-level="8.2" data-path="time-series.html"><a href="time-series.html#data-preparation-and-preprocessing"><i class="fa fa-check"></i><b>8.2</b> Data Preparation and Preprocessing</a></li>
<li class="chapter" data-level="8.3" data-path="time-series.html"><a href="time-series.html#linear-modeling-of-time"><i class="fa fa-check"></i><b>8.3</b> Linear Modeling of Time</a></li>
<li class="chapter" data-level="8.4" data-path="time-series.html"><a href="time-series.html#estimate-seasonality-with-a-harmonic-model"><i class="fa fa-check"></i><b>8.4</b> Estimate Seasonality with a Harmonic Model</a></li>
<li class="chapter" data-level="" data-path="time-series.html"><a href="time-series.html#where-to-submit-4"><i class="fa fa-check"></i>Where to submit</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Remote Sensing in the Social Sciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="linear-regression-1" class="section level1">
<h1><span class="header-section-number">Lab 6</span> Linear Regression</h1>
<p><strong>Overview:</strong></p>
<p>Classifying imagery is an essential part of Remote Sensing research. In the previous lab, we began working with classification and regression, and we will continue on this same path for the first half of this lab. We will begin to explore Random Forest models more in depth, which were briefly introduced in the previous lab.</p>
<p>Ultimately, the purpose of classification in this context is to use known characteristics of a subset of the image to make a best-estimate classification of the rest of the image.</p>
<div id="regression" class="section level2">
<h2><span class="header-section-number">6.1</span> Regression</h2>
<p>In the present context, regression means predicting a numeric variable instead of a class label. No lab on regression would be complete without the requisite introduction to least squares regression.</p>
<div id="ordinary-least-squares-ols" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Ordinary Least Squares (OLS)</h3>
<p><a href="https://en.wikipedia.org/wiki/Ordinary_least_squares">Ordinary regression</a> is when <em>G</em> is a linear function of the form <em>G</em>(<strong>p</strong>) = <strong>βp</strong> where <strong>β</strong> is a vector of coefficients. Once <em>G</em> is trained by some training set <strong>T</strong>, we can estimate the the value for some unknown <strong>p</strong> by multiplying it with <strong>β</strong>.</p>
<p>Suppose the goal is to estimate percent tree cover in each Landsat pixel.</p>
<p>Import data to use known values for <em>g</em>. Search ‘vegetation continuous fields’ to import ‘MOD44B.006’ as the variable<code>mod44b</code> and extract the most recent image.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="linear-regression-1.html#cb1-1"></a><span class="kw">var</span> tree <span class="op">=</span> <span class="va">ee</span>.<span class="at">Image</span>(<span class="va">mod44b</span>.<span class="at">sort</span>(<span class="st">&#39;system:time_start&#39;</span><span class="op">,</span> <span class="kw">false</span>).<span class="at">first</span>())<span class="op">;</span></span></code></pre></div>
<p>Since water is coded as 200 in this image, replace the 200’s with 0’s and display the result. Documentation for the <code>.where</code> clause is at this <a href="https://developers.google.com/earth-engine/apidocs/ee-image-where?hl=en">link</a>. Scroll in and note that when you click on a water area it will say ‘masked’, where as an area on land will provide a numerical value listed as ‘Percent_Tree_Cover’.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="linear-regression-1.html#cb2-1"></a><span class="kw">var</span> percentTree <span class="op">=</span> <span class="va">tree</span>.<span class="at">select</span>(<span class="st">&#39;Percent_Tree_Cover&#39;</span>)</span>
<span id="cb2-2"><a href="linear-regression-1.html#cb2-2"></a>.<span class="at">where</span>(<span class="va">tree</span>.<span class="at">select</span>(<span class="st">&#39;Percent_Tree_Cover&#39;</span>).<span class="at">eq</span>(<span class="dv">200</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb2-3"><a href="linear-regression-1.html#cb2-3"></a><span class="kw">var</span> visualization <span class="op">=</span> <span class="op">{</span></span>
<span id="cb2-4"><a href="linear-regression-1.html#cb2-4"></a>  <span class="dt">bands</span><span class="op">:</span> [<span class="st">&#39;Percent_Tree_Cover&#39;</span>]<span class="op">,</span></span>
<span id="cb2-5"><a href="linear-regression-1.html#cb2-5"></a>  <span class="dt">min</span><span class="op">:</span> <span class="fl">0.0</span><span class="op">,</span></span>
<span id="cb2-6"><a href="linear-regression-1.html#cb2-6"></a>  <span class="dt">max</span><span class="op">:</span> <span class="fl">100.0</span><span class="op">,</span></span>
<span id="cb2-7"><a href="linear-regression-1.html#cb2-7"></a>  <span class="dt">palette</span><span class="op">:</span> [<span class="st">&#39;bbe029&#39;</span><span class="op">,</span> <span class="st">&#39;0a9501&#39;</span><span class="op">,</span> <span class="st">&#39;074b03&#39;</span>]</span>
<span id="cb2-8"><a href="linear-regression-1.html#cb2-8"></a><span class="op">};</span></span>
<span id="cb2-9"><a href="linear-regression-1.html#cb2-9"></a><span class="va">Map</span>.<span class="at">addLayer</span>(percentTree<span class="op">,</span> visualization<span class="op">,</span> <span class="st">&#39;percent tree cover&#39;</span>)<span class="op">;</span> </span></code></pre></div>
<p>Each pixel will represents percent tree cover (as an integer value) at 250 meter resolution in 2010.</p>
<p>Import data to use as predictor variables (<strong>p</strong>). Search ‘landsat 5 raw’ and import ‘USGS Landsat 5 TM Collection 1 Tier 1 Raw Scenes’. Name the import <code>landsat5_raw</code>. Filter by time and the <a href="https://www.usgs.gov/faqs/what-worldwide-reference-system-wrs?qt-news_science_products=0#qt-news_science_products">WRS-2</a> path and row to get only scenes over the San Francisco bay area in 2010.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="linear-regression-1.html#cb3-1"></a><span class="kw">var</span> landsat5_filtered <span class="op">=</span> <span class="va">landsat5_raw</span>.<span class="at">filterDate</span>(<span class="st">&#39;2010-01-01&#39;</span><span class="op">,</span> <span class="st">&#39;2010-12-31&#39;</span>)</span>
<span id="cb3-2"><a href="linear-regression-1.html#cb3-2"></a>.<span class="at">filterMetadata</span>(<span class="st">&#39;WRS_PATH&#39;</span><span class="op">,</span> <span class="st">&#39;equals&#39;</span><span class="op">,</span> <span class="dv">44</span>)</span>
<span id="cb3-3"><a href="linear-regression-1.html#cb3-3"></a>.<span class="at">filterMetadata</span>(<span class="st">&#39;WRS_ROW&#39;</span><span class="op">,</span> <span class="st">&#39;equals&#39;</span><span class="op">,</span> <span class="dv">34</span>)<span class="op">;</span></span></code></pre></div>
<p>Use an Earth Engine algorithm to get a cloud-free composite of Landsat imagery in 2010. Note that this will provide landsat imagery over the area of San Francisco - if you use the inspector to click anywhere else, the values are ‘masked’.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="linear-regression-1.html#cb4-1"></a><span class="kw">var</span> landsat <span class="op">=</span> <span class="va">ee</span>.<span class="va">Algorithms</span>.<span class="va">Landsat</span>.<span class="at">simpleComposite</span>(<span class="op">{</span></span>
<span id="cb4-2"><a href="linear-regression-1.html#cb4-2"></a>  <span class="dt">collection</span><span class="op">:</span> l5filtered<span class="op">,</span></span>
<span id="cb4-3"><a href="linear-regression-1.html#cb4-3"></a>  <span class="dt">asFloat</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb4-4"><a href="linear-regression-1.html#cb4-4"></a><span class="op">}</span>)<span class="op">;</span></span>
<span id="cb4-5"><a href="linear-regression-1.html#cb4-5"></a><span class="va">Map</span>.<span class="at">setCenter</span>(<span class="op">-</span><span class="fl">121.9</span><span class="op">,</span> <span class="fl">37.7</span><span class="op">,</span> <span class="dv">10</span>)</span>
<span id="cb4-6"><a href="linear-regression-1.html#cb4-6"></a><span class="va">Map</span>.<span class="at">addLayer</span>(landsat<span class="op">,</span> <span class="op">{</span><span class="dt">bands</span><span class="op">:</span> [<span class="st">&#39;B4&#39;</span><span class="op">,</span> <span class="st">&#39;B3&#39;</span><span class="op">,</span> <span class="st">&#39;B2&#39;</span>]<span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="fl">0.3</span><span class="op">},</span> <span class="st">&#39;composite&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>Specify the bands of the Landsat composite to be used as predictors (i.e. the elements of <strong>p</strong>):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="linear-regression-1.html#cb5-1"></a><span class="kw">var</span> predictionBands <span class="op">=</span> [<span class="st">&#39;B1&#39;</span><span class="op">,</span> <span class="st">&#39;B2&#39;</span><span class="op">,</span> <span class="st">&#39;B3&#39;</span><span class="op">,</span> <span class="st">&#39;B4&#39;</span><span class="op">,</span> <span class="st">&#39;B5&#39;</span><span class="op">,</span> <span class="st">&#39;B6&#39;</span><span class="op">,</span> <span class="st">&#39;B7&#39;</span>]<span class="op">;</span></span></code></pre></div>
<p>Now that all the input data is ready, we can build the shell of our linear regression equation. It’s customary to include a constant term in linear regression to make it the <a href="https://en.wikipedia.org/wiki/Gauss–Markov_theorem">best linear unbiased estimator</a>. Stack a constant, the predictor variables and the ‘Percent Tree Cover’ Image as the variable <code>trainingImage</code>, representing known <em>g</em>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="linear-regression-1.html#cb6-1"></a><span class="kw">var</span> trainingImage <span class="op">=</span> <span class="va">ee</span>.<span class="at">Image</span>(<span class="dv">1</span>)</span>
<span id="cb6-2"><a href="linear-regression-1.html#cb6-2"></a>  .<span class="at">addBands</span>(<span class="va">landsat</span>.<span class="at">select</span>(predictionBands))</span>
<span id="cb6-3"><a href="linear-regression-1.html#cb6-3"></a>  .<span class="at">addBands</span>(percentTree)<span class="op">;</span></span></code></pre></div>
<p>If you print <code>trainingImage</code> to the console, you will see that the format of the data that we have follows the typical equation for linear regression. <img src="im_05_05.png" alt="Screen Shot 2021-09-26 at 10.14.35 AM" style="zoom:33%;" /></p>
<p><img src="im_05_01.png" alt="Screen Shot 2021-09-26 at 10.11.32 AM" style="zoom:45%;" /></p>
<p>Sample 1000 pixels out of <code>trainingImage</code>, to get a table of Feature Collections, each containing a value for each band (1-7), a value for the ‘Percent Tree Cover’, and a constant (value of 1).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="linear-regression-1.html#cb7-1"></a><span class="kw">var</span> training <span class="op">=</span> <span class="va">trainingImage</span>.<span class="at">sample</span>(<span class="op">{</span></span>
<span id="cb7-2"><a href="linear-regression-1.html#cb7-2"></a> <span class="dt">region</span><span class="op">:</span> <span class="va">landsat5_filtered</span>.<span class="at">first</span>().<span class="at">geometry</span>()<span class="op">,</span> </span>
<span id="cb7-3"><a href="linear-regression-1.html#cb7-3"></a> <span class="dt">scale</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> </span>
<span id="cb7-4"><a href="linear-regression-1.html#cb7-4"></a> <span class="dt">numPixels</span><span class="op">:</span> <span class="dv">1000</span></span>
<span id="cb7-5"><a href="linear-regression-1.html#cb7-5"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Inspect the first element of <code>training</code> to make sure it has all of the expected data.</p>
<p>The next step is to train <em>G</em>. Make a list of the variable names, predictors followed by <em>g</em>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="linear-regression-1.html#cb8-1"></a><span class="kw">var</span> trainingList <span class="op">=</span> <span class="va">ee</span>.<span class="at">List</span>(predictionBands)</span>
<span id="cb8-2"><a href="linear-regression-1.html#cb8-2"></a>  .<span class="at">insert</span>(<span class="dv">0</span><span class="op">,</span> <span class="st">&#39;constant&#39;</span>)</span>
<span id="cb8-3"><a href="linear-regression-1.html#cb8-3"></a>  .<span class="at">add</span>(<span class="st">&#39;Percent_Tree_Cover&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>In Earth Engine, <a href="https://developers.google.com/earth-engine/reducers_regression">linear regression is implemented as a Reducer</a>. This means that training <em>G</em> is a reduction of the <strong>T</strong> table, performed using the list of variables as an input. The argument (8) tells the reducer how many of the input variables are predictors - note that we have 1 as a constant.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="linear-regression-1.html#cb9-1"></a><span class="kw">var</span> regression <span class="op">=</span> <span class="va">training</span>.<span class="at">reduceColumns</span>(<span class="op">{</span> </span>
<span id="cb9-2"><a href="linear-regression-1.html#cb9-2"></a>    <span class="dt">reducer</span><span class="op">:</span> <span class="va">ee</span>.<span class="va">Reducer</span>.<span class="at">linearRegression</span>(<span class="dv">8</span>)<span class="op">,</span>  </span>
<span id="cb9-3"><a href="linear-regression-1.html#cb9-3"></a>    <span class="dt">selectors</span><span class="op">:</span> trainingList</span>
<span id="cb9-4"><a href="linear-regression-1.html#cb9-4"></a>  <span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Print <code>regression</code> - we now have a coefficient for each of the predictor variables (in the order specified by the inputs list), along with a value for residuals (the difference between the observed and predicted values).</p>
<p><img src="im_05_02.png" alt="Screen Shot 2021-09-26 at 10.48.48 AM" style="zoom:50%;" /></p>
<p>To use the coefficients to make a prediction in every pixel, first turn the output coefficients into an image, then perform the multiplication and addition that implements <strong>βp</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="linear-regression-1.html#cb10-1"></a><span class="kw">var</span> coefficients <span class="op">=</span> <span class="va">ee</span>.<span class="at">Array</span>(<span class="va">regression</span>.<span class="at">get</span>(<span class="st">&#39;coefficients&#39;</span>))</span>
<span id="cb10-2"><a href="linear-regression-1.html#cb10-2"></a>        .<span class="at">project</span>([<span class="dv">0</span>])  </span>
<span id="cb10-3"><a href="linear-regression-1.html#cb10-3"></a>        .<span class="at">toList</span>()<span class="op">;</span></span>
<span id="cb10-4"><a href="linear-regression-1.html#cb10-4"></a><span class="kw">var</span> predictedTreeCover <span class="op">=</span> <span class="va">ee</span>.<span class="at">Image</span>(<span class="dv">1</span>)</span>
<span id="cb10-5"><a href="linear-regression-1.html#cb10-5"></a>        .<span class="at">addBands</span>(<span class="va">landsat</span>.<span class="at">select</span>(predictionBands))              </span>
<span id="cb10-6"><a href="linear-regression-1.html#cb10-6"></a>        .<span class="at">multiply</span>(<span class="va">ee</span>.<span class="va">Image</span>.<span class="at">constant</span>(coefficients))              </span>
<span id="cb10-7"><a href="linear-regression-1.html#cb10-7"></a>        .<span class="at">reduce</span>(<span class="va">ee</span>.<span class="va">Reducer</span>.<span class="at">sum</span>())   </span>
<span id="cb10-8"><a href="linear-regression-1.html#cb10-8"></a>        .<span class="at">rename</span>(<span class="st">&#39;predictedTreeCover&#39;</span>)<span class="op">;</span></span>
<span id="cb10-9"><a href="linear-regression-1.html#cb10-9"></a><span class="va">Map</span>.<span class="at">addLayer</span>(predictedTreeCover<span class="op">,</span>  </span>
<span id="cb10-10"><a href="linear-regression-1.html#cb10-10"></a>             <span class="op">{</span><span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span> </span>
<span id="cb10-11"><a href="linear-regression-1.html#cb10-11"></a>              <span class="dt">palette</span><span class="op">:</span>[<span class="st">&#39;bbe029&#39;</span><span class="op">,</span> <span class="st">&#39;0a9501&#39;</span><span class="op">,</span> <span class="st">&#39;074b03&#39;</span>]<span class="op">},</span> </span>
<span id="cb10-12"><a href="linear-regression-1.html#cb10-12"></a>             <span class="st">&#39;prediction&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>Carefully inspect this result by using inspector on the prediction layer and comparing it to the satellite imagery basemap. Is it satisfactory? If not, it might be worth testing some other regression functions, adding more predictor variables, collecting more training data, or all of the above. In remote sensing research, this is not a one-step process - to find value in these models, you will need to continuously improve, iterate and retest your assumptions.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="linear-regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="nonlinear-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["labs-rsss.pdf"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
